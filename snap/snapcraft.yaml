name: cevelop
base: core18
version: 1.12.1-201907101456
summary: The C++ IDE for professional developers
description: |
  Major parts of Cevelop are Open Source as Eclipse CDT to which we actively
  contribute, especially in the area of the C++ parser and refactoring
  infrastructure.
grade: stable
confinement: classic

architectures:
  - build-on: amd64

parts:
  cevelop:
    plugin: dump
    source: https://www.cevelop.com/cevelop/downloads/$SNAPCRAFT_PROJECT_NAME-$SNAPCRAFT_PROJECT_VERSION-linux.gtk.x86_64.tar.gz
    override-build: |
      snapcraftctl build
      rm $SNAPCRAFT_PART_INSTALL/cevelop.desktop

  java:
    plugin: nil
    stage-packages:
      - openjdk-11-jre
    override-build: |
      snapcraftctl build
      rm $SNAPCRAFT_PART_INSTALL/usr/lib/jvm/java-11-openjdk-*/lib/security/cacerts

  desktop:
    plugin: dump
    source: glue

environment:
  PATH: $PATH:/snap/cevelop/current/usr/lib/jvm/java-11-openjdk-$SNAP_ARCH/bin/:$SNAP

apps:
  cevelop:
    command: bash -c "env XDG_RUNTIME_DIR=/run/user/$(id -u) $SNAP/cevelop.sh -configuration $SNAP_USER_DATA/.cevelop"
    desktop: cevelop.desktop
